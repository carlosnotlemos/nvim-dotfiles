"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveJson5File = void 0;
const fs_1 = __importDefault(require("fs"));
const json5_1 = __importDefault(require("json5"));
/**
 * Attempts to resolve the path to a json5 file using node.js resolution rules
 *
 * returns null if file could not be resolved, or if JSON5 parsing fails
 * @see https://www.typescriptlang.org/tsconfig/#extends
 */
const resolveJson5File = ({ path, base, }) => {
    try {
        const filepath = require.resolve(path, { paths: [base] });
        const content = fs_1.default.readFileSync(filepath, 'utf8');
        const isEmpty = content.trim() === '';
        const config = isEmpty ? {} : json5_1.default.parse(content);
        return { filepath, isEmpty, config };
    }
    catch (e) {
        return null;
    }
};
exports.resolveJson5File = resolveJson5File;
